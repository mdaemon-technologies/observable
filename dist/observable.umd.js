!function(r,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(r="undefined"!=typeof globalThis?globalThis:r||self).observable=e()}(this,(function(){"use strict";var r,e=(r=function(r,e){return typeof r===e},{object:function(e){return r(e,"object")&&null!==e&&!Array.isArray(e)},number:function(e){return r(e,"number")},string:function(e){return r(e,"string")},array:function(r){return Array.isArray(r)},undef:function(e){return r(e,"undefined")},func:function(e){return r(e,"function")},bool:function(e){return r(e,"boolean")}}),t=function(r,o){if(!e.object(r)||!e.object(o))return!1;var i=!1;return Object.keys(o).forEach((function(u){e.object(r[u])?i=t(r[u],o[u]):e.array(r[u])&&e.array(o[u])?i=n(r[u],o[u]):r[u]!==o[u]&&(r[u]=o[u],i=!0)})),i},n=function(r,n){for(var o=!1,i=0,u=n.length;i<u;i++)e.object(r[i])?o=t(r[i],n[i]):r[i]!==n[i]&&(r[i]=n[i],o=!0);return o},o=function(r){if(e.object(r)){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=o(r[n]));return t}return Array.isArray(r)?r.map((function(r){return o(r)})):r},i=function(r,t,n){return void 0===n&&(n=new WeakMap),r===t||typeof r==typeof t&&(Array.isArray(r)&&Array.isArray(t)?u(r,t,n):!(!e.object(r)||!e.object(t))&&s(r,t,n))},u=function(r,e,t){return r.length===e.length&&r.every((function(r,t){return i(r,e[t])}),t)},s=function(r,e,t){var n=Object.keys(r),o=Object.keys(e);return n.length===o.length&&n.every((function(t){return i(r[t],e[t])}),t)},a=function(){function r(r,e){this.name=r,this.value=e,this.observers=[]}return r.prototype.get=function(){return void 0===this.value?void 0:o(this.value)},r.prototype.set=function(r){if(void 0===this.value)return this.value=o(r),this.changed(void 0),!0;var n,u;if(n=r,u=this.value,e.array(n)&&e.array(u)||e.object(n)&&e.object(u)||e.number(n)&&e.number(u)||e.string(n)&&e.string(u)||e.bool(n)&&e.bool(u)){var s=!1,a=o(this.value);return e.array(this.value)?(s=!i(this.value,r),this.value=o(r)):e.object(this.value)?s=t(this.value,r):(s=this.value!==r,this.value=r),s&&this.changed(a),s}return!1},r.prototype.observe=function(r){var e=this,t={id:"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(r){var e=16*Math.random()|0;return("x"===r?e:3&e|8).toString(16)})),observe:r};return this.observers.push(t),function(){e.stop(t.id)}},r.prototype.stop=function(r){for(var e=this.observers.length;e--;)if(this.observers[e].id===r)return this.observers.splice(e,1),!0;return!1},r.prototype.changed=function(r){var e=this.get();this.observers.forEach((function(t){t.observe(e,r)}))},r}(),f=[];return function(r,t){var n=function(r,e){var t=f.find((function(e){return e.name===r}));return void 0!==e&&(null==t||t.set(e)),t||(t=new a(r,e),f.push(t)),t}(r,t);return function(t){if(e.undef(t))return n.get();if(t!=="destroy-observable-"+r)return"function"==typeof t?n.observe(t):n.set(t);var o=f.indexOf(n);o>-1&&f.splice(o,1)}}}));
