!function(r,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(r="undefined"!=typeof globalThis?globalThis:r||self).observable=e()}(this,(function(){"use strict";var r={object:function(r){return"object"==typeof r&&null!==r&&!Array.isArray(r)},number:function(r){return"number"==typeof r},string:function(r){return"string"==typeof r},array:function(r){return Array.isArray(r)},undef:function(r){return void 0===r},func:function(r){return"function"==typeof r},bool:function(r){return"boolean"==typeof r}},e=function(t,n){var i=!1;return!(!r.object(t)||!r.object(n))&&(Object.keys(n).forEach((function(o){if(r.object(t[o]))i=e(t[o],n[o]);else if(r.array(t[o])&&r.array(n[o]))for(var u=0,s=n[o].length;u<s;u++)r.object(t[o][u])?i=e(t[o][u],n[o][u]):t[o][u]!==n[o][u]&&(t[o][u]=n[o][u],i=!0);else t[o]!==n[o]&&(t[o]=n[o],i=!0)})),i)},t=function(e){if(r.object(e)){var n={};return Object.keys(e).forEach((function(r){n[r]=t(e[r])})),n}return Array.isArray(e)?e.map((function(r){return t(r)})):e},n=function(e,t){if(typeof e!=typeof t)return!1;if(r.string(e)||r.number(e)||r.bool(e))return e===t;if(Array.isArray(e)&&!Array.isArray(t)||!Array.isArray(e)&&Array.isArray(t))return!1;if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;for(var i=e.length;i--;)if(!n(e[i],t[i]))return!1;return!0}if(r.object(e)&&r.object(t)){if(Object.keys(e).join("")!==Object.keys(t).join(""))return!1;var o=Object.keys(e);for(i=o.length;i--;)if(!n(e[o[i]],t[o[i]]))return!1;return!0}return!1},i=function(){function i(r,e){this.name=r,this.value=e,this.observers=[]}return i.prototype.get=function(){return void 0===this.value?void 0:t(this.value)},i.prototype.set=function(i){if(void 0===this.value)return this.value=t(i),this.changed(void 0),!0;if(r.array(i)&&r.array(this.value)||r.object(i)&&r.object(this.value)||r.number(i)&&r.number(this.value)||r.string(i)&&r.string(this.value)||r.bool(i)&&r.bool(this.value)){var o=!1,u=t(this.value);return Array.isArray(this.value)?(o=!n(this.value,i),this.value=t(i)):r.object(this.value)?o=e(this.value,i):(o=this.value!==i,this.value=i),o&&this.changed(u),o}return!1},i.prototype.observe=function(r){var e=this,t={id:"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(r){var e=16*Math.random()|0;return("x"===r?e:3&e|8).toString(16)})),observe:r};return this.observers.push(t),function(){e.stop(t.id)}},i.prototype.stop=function(r){for(var e=this.observers.length;e--;)if(this.observers[e].id===r)return this.observers.splice(e,1),!0;return!1},i.prototype.changed=function(r){var e=this.get();this.observers.forEach((function(t){t.observe(e,r)}))},i}(),o=[];return function(e,t){var n=function(r,e){var t=o.find((function(e){return e.name===r}));return void 0!==e&&(null==t||t.set(e)),t||(t=new i(r,e),o.push(t)),t}(e,t);return function(e){return r.undef(e)?n.get():"function"==typeof e?n.observe(e):n.set(e)}}}));
