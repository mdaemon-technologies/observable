!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?module.exports=r():"function"==typeof define&&define.amd?define(r):(e="undefined"!=typeof globalThis?globalThis:e||self).observable=r()}(this,(function(){"use strict";var e,r=(e=function(e,r){return typeof e===r},{object:function(r){return e(r,"object")&&null!==r&&!Array.isArray(r)},number:function(r){return e(r,"number")},string:function(r){return e(r,"string")},array:function(e){return Array.isArray(e)},undef:function(r){return e(r,"undefined")},func:function(r){return e(r,"function")},bool:function(r){return e(r,"boolean")}}),t=function(e,o,i){if(void 0===i&&(i=new WeakSet),!r.object(e)||!r.object(o))return!1;if(i.has(e))return!1;i.add(e);var u=!1,a=e,s=o;return Object.keys(s).forEach((function(e){r.object(a[e])?t(a[e],s[e],i)&&(u=!0):r.array(a[e])&&r.array(s[e])?n(a[e],s[e],i)&&(u=!0):a[e]!==s[e]&&(a[e]=s[e],u=!0)})),u},n=function(e,n,o){if(void 0===o&&(o=new WeakSet),o.has(e))return!1;o.add(e);for(var i=!1,u=0,a=n.length;u<a;u++)r.object(e[u])?t(e[u],n[u],o)&&(i=!0):e[u]!==n[u]&&(e[u]=n[u],i=!0);return i},o=function(e,t){if(void 0===t&&(t=new WeakMap),r.object(e)){if(t.has(e))return t.get(e);var n={};for(var i in t.set(e,n),e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=o(e[i],t));return n}if(Array.isArray(e)){if(t.has(e))return t.get(e);var u=[];t.set(e,u);for(var a=0,s=e;a<s.length;a++){var f=s[a];u.push(o(f,t))}return u}return e},i=function(e,t,n){if(void 0===n&&(n=new WeakMap),e===t)return!0;if(typeof e!=typeof t)return!1;if(r.object(e)||r.array(e)){if(n.get(e)===t)return!0;n.set(e,t)}return Array.isArray(e)&&Array.isArray(t)?u(e,t,n):!(!r.object(e)||!r.object(t))&&a(e,t,n)},u=function(e,r,t){return e.length===r.length&&e.every((function(e,n){return i(e,r[n],t)}))},a=function(e,r,t){var n=Object.keys(e),o=Object.keys(r);return n.length===o.length&&n.every((function(n){return i(e[n],r[n],t)}))},s=function(){function e(e,r){this.name=e,this.value=r,this.observers=[]}return e.prototype.get=function(){return void 0===this.value?void 0:o(this.value)},e.prototype.set=function(e){if(void 0===this.value)return this.value=o(e),this.changed(void 0),!0;var n,u;if(n=e,u=this.value,r.array(n)&&r.array(u)||r.object(n)&&r.object(u)||r.number(n)&&r.number(u)||r.string(n)&&r.string(u)||r.bool(n)&&r.bool(u)){var a=!1,s=o(this.value);return r.array(this.value)?(a=!i(this.value,e),this.value=o(e)):r.object(this.value)?a=t(this.value,e):(a=this.value!==e,this.value=e),a&&this.changed(s),a}return!1},e.prototype.observe=function(e){var r=this,t={id:"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var r=16*Math.random()|0;return("x"===e?r:3&r|8).toString(16)})),observe:e};return this.observers.push(t),function(){r.stop(t.id)}},e.prototype.stop=function(e){for(var r=this.observers.length;r--;)if(this.observers[r].id===e)return this.observers.splice(r,1),!0;return!1},e.prototype.changed=function(e){var r=this.get();this.observers.forEach((function(t){t.observe(r,e)}))},e}(),f=[];return function(e,t){var n=function(e,r){var t=f.find((function(r){return r.name===e}));return void 0!==r&&(null==t||t.set(r)),t||(t=new s(e,r),f.push(t)),t}(e,t);return function(t){if(r.undef(t))return n.get();if(t!=="destroy-observable-"+e)return"function"==typeof t?n.observe(t):n.set(t);var o=f.indexOf(n);o>-1&&f.splice(o,1)}}}));
