var r,t=(r=function(r,t){return typeof r===t},{object:function(t){return r(t,"object")&&null!==t&&!Array.isArray(t)},number:function(t){return r(t,"number")},string:function(t){return r(t,"string")},array:function(r){return Array.isArray(r)},undef:function(t){return r(t,"undefined")},func:function(t){return r(t,"function")},bool:function(t){return r(t,"boolean")}}),e=function(r,o,i){if(void 0===i&&(i=new WeakSet),!t.object(r)||!t.object(o))return!1;if(i.has(r))return!1;i.add(r);var u=!1,a=r,s=o;return Object.keys(s).forEach((function(r){t.object(a[r])?e(a[r],s[r],i)&&(u=!0):t.array(a[r])&&t.array(s[r])?n(a[r],s[r],i)&&(u=!0):a[r]!==s[r]&&(a[r]=s[r],u=!0)})),u},n=function(r,n,o){if(void 0===o&&(o=new WeakSet),o.has(r))return!1;o.add(r);for(var i=!1,u=0,a=n.length;u<a;u++)t.object(r[u])?e(r[u],n[u],o)&&(i=!0):r[u]!==n[u]&&(r[u]=n[u],i=!0);return i},o=function(r,e){if(void 0===e&&(e=new WeakMap),t.object(r)){if(e.has(r))return e.get(r);var n={};for(var i in e.set(r,n),r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=o(r[i],e));return n}if(Array.isArray(r)){if(e.has(r))return e.get(r);var u=[];e.set(r,u);for(var a=0,s=r;a<s.length;a++){var f=s[a];u.push(o(f,e))}return u}return r},i=function(r,e,n){if(void 0===n&&(n=new WeakMap),r===e)return!0;if(typeof r!=typeof e)return!1;if(t.object(r)||t.array(r)){if(n.get(r)===e)return!0;n.set(r,e)}return Array.isArray(r)&&Array.isArray(e)?u(r,e,n):!(!t.object(r)||!t.object(e))&&a(r,e,n)},u=function(r,t,e){return r.length===t.length&&r.every((function(r,n){return i(r,t[n],e)}))},a=function(r,t,e){var n=Object.keys(r),o=Object.keys(t);return n.length===o.length&&n.every((function(n){return i(r[n],t[n],e)}))},s=function(){function r(r,t){this.name=r,this.value=t,this.observers=[]}return r.prototype.get=function(){return void 0===this.value?void 0:o(this.value)},r.prototype.set=function(r){if(void 0===this.value)return this.value=o(r),this.changed(void 0),!0;var n,u;if(n=r,u=this.value,t.array(n)&&t.array(u)||t.object(n)&&t.object(u)||t.number(n)&&t.number(u)||t.string(n)&&t.string(u)||t.bool(n)&&t.bool(u)){var a=!1,s=o(this.value);return t.array(this.value)?(a=!i(this.value,r),this.value=o(r)):t.object(this.value)?a=e(this.value,r):(a=this.value!==r,this.value=r),a&&this.changed(s),a}return!1},r.prototype.observe=function(r){var t=this,e={id:"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(r){var t=16*Math.random()|0;return("x"===r?t:3&t|8).toString(16)})),observe:r};return this.observers.push(e),function(){t.stop(e.id)}},r.prototype.stop=function(r){for(var t=this.observers.length;t--;)if(this.observers[t].id===r)return this.observers.splice(t,1),!0;return!1},r.prototype.changed=function(r){var t=this.get();this.observers.forEach((function(e){e.observe(t,r)}))},r}(),f=[];function c(r,e){var n=function(r,t){var e=f.find((function(t){return t.name===r}));return void 0!==t&&(null==e||e.set(t)),e||(e=new s(r,t),f.push(e)),e}(r,e);return function(e){if(t.undef(e))return n.get();if(e!=="destroy-observable-"+r)return"function"==typeof e?n.observe(e):n.set(e);var o=f.indexOf(n);o>-1&&f.splice(o,1)}}export{c as default};
